{
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/store/FabaImmutableStore.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/store/FabaImmutableStore.ts","statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":64}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"4":{"start":{"line":19,"column":0},"end":{"line":19,"column":64}},"5":{"start":{"line":19,"column":55},"end":{"line":19,"column":71}},"6":{"start":{"line":46,"column":8},"end":{"line":46,"column":15}},"7":{"start":{"line":47,"column":18},"end":{"line":47,"column":56}},"8":{"start":{"line":49,"column":8},"end":{"line":49,"column":49}},"9":{"start":{"line":50,"column":8},"end":{"line":50,"column":41}},"10":{"start":{"line":51,"column":8},"end":{"line":51,"column":39}},"11":{"start":{"line":53,"column":8},"end":{"line":56,"column":11}},"12":{"start":{"line":54,"column":12},"end":{"line":54,"column":34}},"13":{"start":{"line":55,"column":12},"end":{"line":55,"column":27}},"14":{"start":{"line":58,"column":8},"end":{"line":62,"column":11}},"15":{"start":{"line":59,"column":12},"end":{"line":59,"column":34}},"16":{"start":{"line":60,"column":12},"end":{"line":60,"column":44}},"17":{"start":{"line":61,"column":12},"end":{"line":61,"column":51}},"18":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":26}},"20":{"start":{"line":36,"column":4},"end":{"line":38,"column":5}},"21":{"start":{"line":37,"column":8},"end":{"line":37,"column":26}},"22":{"start":{"line":71,"column":4},"end":{"line":74,"column":5}},"23":{"start":{"line":71,"column":34},"end":{"line":71,"column":56}},"24":{"start":{"line":72,"column":22},"end":{"line":72,"column":37}},"25":{"start":{"line":73,"column":8},"end":{"line":73,"column":40}},"26":{"start":{"line":79,"column":4},"end":{"line":84,"column":5}},"27":{"start":{"line":79,"column":28},"end":{"line":79,"column":53}},"28":{"start":{"line":80,"column":22},"end":{"line":80,"column":37}},"29":{"start":{"line":81,"column":19},"end":{"line":81,"column":44}},"30":{"start":{"line":83,"column":8},"end":{"line":83,"column":61}},"31":{"start":{"line":91,"column":4},"end":{"line":99,"column":5}},"32":{"start":{"line":92,"column":8},"end":{"line":96,"column":9}},"33":{"start":{"line":93,"column":26},"end":{"line":93,"column":41}},"34":{"start":{"line":94,"column":23},"end":{"line":94,"column":48}},"35":{"start":{"line":95,"column":12},"end":{"line":95,"column":29}},"36":{"start":{"line":98,"column":8},"end":{"line":98,"column":39}},"37":{"start":{"line":100,"column":0},"end":{"line":100,"column":1}}},"fnMap":{"1":{"name":"(anonymous_0)","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":-1}}},"2":{"name":"FabaImmutableStore","line":45,"loc":{"start":{"line":45,"column":68},"end":{"line":63,"column":5}}},"3":{"name":"(anonymous_2)","line":53,"loc":{"start":{"line":53,"column":48},"end":{"line":56,"column":9}}},"4":{"name":"(anonymous_3)","line":58,"loc":{"start":{"line":58,"column":49},"end":{"line":62,"column":9}}},"5":{"name":"(anonymous_4)","line":28,"loc":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}}},"6":{"name":"(anonymous_5)","line":36,"loc":{"start":{"line":36,"column":4},"end":{"line":38,"column":5}}},"7":{"name":"(anonymous_6)","line":71,"loc":{"start":{"line":71,"column":56},"end":{"line":74,"column":5}}},"8":{"name":"(anonymous_7)","line":79,"loc":{"start":{"line":79,"column":53},"end":{"line":84,"column":5}}},"9":{"name":"(anonymous_8)","line":91,"loc":{"start":{"line":91,"column":26},"end":{"line":99,"column":5}}}},"branchMap":{"1":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":15}},{"start":{"line":46,"column":15},"end":{"line":63,"column":4}}]},"2":{"line":47,"type":"cond-expr","locations":[{"start":{"line":47,"column":30},"end":{"line":47,"column":37}},{"start":{"line":47,"column":40},"end":{"line":47,"column":56}}]},"3":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":34},"end":{"line":71,"column":56}},{"start":{"line":71,"column":34},"end":{"line":71,"column":56}}]},"4":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":28},"end":{"line":79,"column":53}},{"start":{"line":79,"column":28},"end":{"line":79,"column":53}}]},"5":{"line":83,"type":"cond-expr","locations":[{"start":{"line":83,"column":29},"end":{"line":83,"column":45}},{"start":{"line":83,"column":48},"end":{"line":83,"column":60}}]},"6":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":8},"end":{"line":96,"column":9}},{"start":{"line":92,"column":8},"end":{"line":96,"column":9}}]}},"s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":1,"19":1,"20":1,"21":2,"22":1,"23":2,"24":1,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1},"b":{"1":[1,1],"2":[1,0],"3":[1,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":2,"7":1,"8":0,"9":0},"code":["import FabaStoreUpdateEvent from \"../event/FabaStoreUpdateEvent\";","import FabaStore from \"./FabaStore\";","","const Baobab = require(\"baobab\");","","interface IBaobabUpdate{","    data: {","        currentData:Object;","    };","}","","export interface IFabaImmutableStoreOptions{","    immutable:boolean","}","","/**"," * Immutable store used by every Command (Register the store in Core / Runtime)"," */","export default class FabaImmutableStore<TProp> extends FabaStore<TProp> {","    private bTree: any;","    private cursor: any;","    protected bData: any;","","    /**","     *","     * @returns {any}","     */","    get tree() {","        return this.bTree;","    }","","    /**","     *","     * @returns {any}","     */","    get data(): TProp {","        return this.bData;","    }","","    /**","     *","     * @param jsonObject","     * @param options","     */","    constructor(jsonObject: any, options?:IFabaImmutableStoreOptions) {","        super();","        let opt = (options) ? options : {immutable:true};","","        this.bTree = new Baobab(jsonObject, opt);","        this.cursor = this.tree.select();","        this.bData = this.cursor.get();","","        this.bTree.on(\"update\", (e:IBaobabUpdate) => {","            console.log(\"update\");","            console.log(e);","        });","","        this.cursor.on(\"update\", (e:IBaobabUpdate) => {","            console.log(\"update\");","            this.bData = e.data.currentData;","            new FabaStoreUpdateEvent(e).dispatch();","        });","    }","","    /**","     *","     * @param path","     * @param value","     * @param update","     */","    set(path: string, value: any, update: boolean = true) {","        let arrPath = path.split(\".\");","        this.cursor.set(arrPath, value);","    }","","    /**","     *","     */","    duplicate(path: string, deppClone:boolean = false):any{","        let arrPath = path.split(\".\");","        let curs = this.tree.select(arrPath);","","        return (deppClone) ? curs.deepClone() : curs.clone();","    }","","    /**","     * Serialize cursor (if empty serialize all)","     *","     * @returns {string}","     */","    serialize(path?:string):string{","        if (path){","            let arrPath = path.split(\".\");","            let curs = this.tree.select(arrPath);","            curs.serialize();","        }","","        return this.cursor.serialize();","    }","}","",""],"l":{"1":1,"2":1,"4":1,"19":1,"28":1,"29":1,"36":1,"37":2,"46":1,"47":1,"49":1,"50":1,"51":1,"53":1,"54":0,"55":0,"58":1,"59":0,"60":0,"61":0,"71":2,"72":1,"73":1,"79":1,"80":0,"81":0,"83":0,"91":1,"92":0,"93":0,"94":0,"95":0,"98":0,"100":1}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/event/FabaStoreUpdateEvent.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/event/FabaStoreUpdateEvent.ts","statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":59}},"3":{"start":{"line":6,"column":50},"end":{"line":6,"column":59}},"4":{"start":{"line":14,"column":8},"end":{"line":14,"column":37}},"5":{"start":{"line":16,"column":8},"end":{"line":16,"column":22}},"6":{"start":{"line":18,"column":0},"end":{"line":18,"column":1}}},"fnMap":{"1":{"name":"(anonymous_0)","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":-1}}},"2":{"name":"FabaStoreUpdateEvent","line":13,"loc":{"start":{"line":13,"column":22},"end":{"line":17,"column":5}}}},"branchMap":{"1":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":8},"end":{"line":14,"column":37}},{"start":{"line":14,"column":37},"end":{"line":17,"column":4}}]}},"s":{"1":1,"2":1,"3":1,"4":2,"5":2,"6":1},"b":{"1":[2,2]},"f":{"1":1,"2":2},"code":["import FabaEvent from \"../FabaEvent\";","","/**"," * Event that fires if the store (single source of trough)"," */","export default class FabaStoreUpdateEvent extends FabaEvent {","    data: any;","","    /**","     * TODO: Is this class used?","     * @param e","     */","    constructor(e: any) {","        super(\"FabaStoreUpdateEvent\");","","        this.data = e;","    }","}"],"l":{"1":1,"6":1,"14":2,"16":2,"18":1}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaEvent.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaEvent.ts","statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"2":{"start":{"line":6,"column":0},"end":{"line":70,"column":0}},"3":{"start":{"line":16,"column":8},"end":{"line":16,"column":37}},"4":{"start":{"line":22,"column":4},"end":{"line":26,"column":5}},"5":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"6":{"start":{"line":24,"column":12},"end":{"line":24,"column":27}},"7":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"8":{"start":{"line":33,"column":8},"end":{"line":33,"column":31}},"9":{"start":{"line":42,"column":4},"end":{"line":50,"column":5}},"10":{"start":{"line":42,"column":4},"end":{"line":50,"column":4}},"11":{"start":{"line":43,"column":8},"end":{"line":49,"column":18}},"12":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"13":{"start":{"line":45,"column":16},"end":{"line":45,"column":32}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":49}},"15":{"start":{"line":58,"column":10},"end":{"line":69,"column":5}},"16":{"start":{"line":58,"column":31},"end":{"line":58,"column":88}},"17":{"start":{"line":59,"column":8},"end":{"line":66,"column":9}},"18":{"start":{"line":60,"column":12},"end":{"line":63,"column":15}},"19":{"start":{"line":61,"column":16},"end":{"line":61,"column":35}},"20":{"start":{"line":62,"column":16},"end":{"line":62,"column":53}},"21":{"start":{"line":65,"column":12},"end":{"line":65,"column":49}},"22":{"start":{"line":68,"column":8},"end":{"line":68,"column":20}},"23":{"start":{"line":70,"column":0},"end":{"line":70,"column":1}},"24":{"start":{"line":75,"column":0},"end":{"line":81,"column":1}},"25":{"start":{"line":76,"column":4},"end":{"line":76,"column":11}},"26":{"start":{"line":77,"column":4},"end":{"line":77,"column":10}},"27":{"start":{"line":78,"column":4},"end":{"line":78,"column":9}},"28":{"start":{"line":79,"column":4},"end":{"line":79,"column":11}},"29":{"start":{"line":80,"column":4},"end":{"line":80,"column":11}}},"fnMap":{"1":{"name":"(anonymous_0)","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":-1}}},"2":{"name":"FabaEvent","line":15,"loc":{"start":{"line":15,"column":35},"end":{"line":17,"column":5}}},"3":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":4},"end":{"line":26,"column":5}}},"4":{"name":"(anonymous_3)","line":32,"loc":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}}},"5":{"name":"(anonymous_4)","line":42,"loc":{"start":{"line":42,"column":73},"end":{"line":50,"column":5}}},"6":{"name":"(anonymous_5)","line":43,"loc":{"start":{"line":43,"column":19},"end":{"line":49,"column":9}}},"7":{"name":"(anonymous_6)","line":58,"loc":{"start":{"line":58,"column":88},"end":{"line":69,"column":5}}},"8":{"name":"(anonymous_9)","line":60,"loc":{"start":{"line":60,"column":47},"end":{"line":63,"column":13}}},"9":{"name":"(anonymous_10)","line":75,"loc":{"start":{"line":75,"column":31},"end":{"line":81,"column":1}}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},{"start":{"line":23,"column":8},"end":{"line":25,"column":9}}]},"2":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},{"start":{"line":44,"column":12},"end":{"line":46,"column":13}}]},"3":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":31},"end":{"line":58,"column":88}},{"start":{"line":58,"column":31},"end":{"line":58,"column":88}}]},"4":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":66,"column":9}},{"start":{"line":59,"column":8},"end":{"line":66,"column":9}}]},"5":{"line":75,"type":"binary-expr","locations":[{"start":{"line":75,"column":12},"end":{"line":75,"column":31}},{"start":{"line":75,"column":12},"end":{"line":75,"column":31}}]}},"s":{"1":1,"2":1,"3":2,"4":1,"5":1,"6":1,"7":1,"8":0,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":2,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1},"b":{"1":[1,0],"2":[0,0],"3":[1,0],"4":[1,0],"5":[1,1]},"f":{"1":1,"2":2,"3":1,"4":0,"5":0,"6":0,"7":1,"8":1,"9":1},"code":["import FabaCore from \"./FabaCore\";","","/**"," * FabaEvent which is used to communicate with the Commands"," */","export default class FabaEvent {","","    identifyer: string;","    cbs: any;","","    /**","     *","     * @param identifyer","     */","    constructor(identifyer?: string) {","        this.identifyer = identifyer;","    }","","    /**","     *","     */","    callBack() {","        if(this.cbs){","            this.cbs(this);","        }","    }","","    /**","     *","     * @returns {string}","     */","    get name(): string {","        return this.identifyer;","    }","","    /**","     *","     * @param delay","     * @param calb","     * @param result","     */","    delayDispatch(delay: number, calb?: any, result?: FabaEventResultType): void {","        setTimeout(()=> {","            if (calb) {","                this.cbs = calb;","            }","","            FabaCore.dispatchEvent(this, result);","        }, delay);","    }","","    /**","     *","     * @param calb","     * @param result","     * @returns {Promise<any>}","     */","    async dispatch(calb?: any, result: FabaEventResultType = FabaEventResultType.EXECUTE) : Promise<any>{","        if (result === FabaEventResultType.EXECUTE) {","            return new Promise((resolve, reject)=> {","                this.cbs = resolve;","                FabaCore.dispatchEvent(this, result);","            });","        } else {","            FabaCore.dispatchEvent(this, result);","        }","","        return null;","    }","}","","/**"," *"," */","export enum FabaEventResultType{","    EXECUTE,","    RESULT,","    ERROR,","    TIMEOUT,","    OFFLINE","}","","export interface IFabaEvent {","}",""],"l":{"1":1,"6":1,"16":2,"22":1,"23":1,"24":1,"32":1,"33":0,"42":1,"43":0,"44":0,"45":0,"48":0,"58":2,"59":1,"60":1,"61":1,"62":1,"65":0,"68":0,"70":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCore.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCore.ts","statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":58}},"2":{"start":{"line":23,"column":0},"end":{"line":null,"column":-1}},"3":{"start":{"line":50,"column":8},"end":{"line":50,"column":52}},"4":{"start":{"line":50,"column":29},"end":{"line":50,"column":52}},"5":{"start":{"line":53,"column":11},"end":{"line":59,"column":5}},"6":{"start":{"line":55,"column":12},"end":{"line":55,"column":35}},"7":{"start":{"line":65,"column":11},"end":{"line":69,"column":5}},"8":{"start":{"line":66,"column":8},"end":{"line":66,"column":32}},"9":{"start":{"line":67,"column":8},"end":{"line":67,"column":29}},"10":{"start":{"line":68,"column":8},"end":{"line":68,"column":26}},"11":{"start":{"line":76,"column":11},"end":{"line":98,"column":5}},"12":{"start":{"line":77,"column":8},"end":{"line":83,"column":9}},"13":{"start":{"line":78,"column":24},"end":{"line":78,"column":49}},"14":{"start":{"line":80,"column":12},"end":{"line":82,"column":13}},"15":{"start":{"line":81,"column":16},"end":{"line":81,"column":29}},"16":{"start":{"line":85,"column":38},"end":{"line":85,"column":45}},"17":{"start":{"line":87,"column":8},"end":{"line":93,"column":9}},"18":{"start":{"line":88,"column":12},"end":{"line":92,"column":13}},"19":{"start":{"line":89,"column":16},"end":{"line":89,"column":120}},"20":{"start":{"line":91,"column":16},"end":{"line":91,"column":119}},"21":{"start":{"line":95,"column":8},"end":{"line":95,"column":64}},"22":{"start":{"line":97,"column":8},"end":{"line":97,"column":20}},"23":{"start":{"line":106,"column":11},"end":{"line":130,"column":5}},"24":{"start":{"line":107,"column":8},"end":{"line":129,"column":9}},"25":{"start":{"line":108,"column":47},"end":{"line":108,"column":81}},"26":{"start":{"line":109,"column":12},"end":{"line":128,"column":13}},"27":{"start":{"line":110,"column":16},"end":{"line":127,"column":17}},"28":{"start":{"line":110,"column":28},"end":{"line":110,"column":27}},"29":{"start":{"line":111,"column":20},"end":{"line":126,"column":21}},"30":{"start":{"line":113,"column":28},"end":{"line":113,"column":71}},"31":{"start":{"line":114,"column":28},"end":{"line":114,"column":34}},"32":{"start":{"line":116,"column":28},"end":{"line":116,"column":70}},"33":{"start":{"line":117,"column":28},"end":{"line":117,"column":34}},"34":{"start":{"line":119,"column":28},"end":{"line":119,"column":69}},"35":{"start":{"line":120,"column":28},"end":{"line":120,"column":34}},"36":{"start":{"line":122,"column":28},"end":{"line":122,"column":71}},"37":{"start":{"line":123,"column":28},"end":{"line":123,"column":34}},"38":{"start":{"line":125,"column":28},"end":{"line":125,"column":71}},"39":{"start":{"line":131,"column":0},"end":{"line":131,"column":1}},"40":{"start":{"line":27,"column":11},"end":{"line":27,"column":52}},"41":{"start":{"line":32,"column":11},"end":{"line":32,"column":28}},"42":{"start":{"line":37,"column":11},"end":{"line":37,"column":25}}},"fnMap":{"1":{"name":"(anonymous_0)","line":23,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":-1}}},"2":{"name":"FabaCore","line":49,"loc":{"start":{"line":49,"column":36},"end":{"line":51,"column":5}}},"3":{"name":"(anonymous_2)","line":53,"loc":{"start":{"line":53,"column":45},"end":{"line":59,"column":5}}},"4":{"name":"(anonymous_3)","line":65,"loc":{"start":{"line":65,"column":4},"end":{"line":69,"column":5}}},"5":{"name":"(anonymous_4)","line":76,"loc":{"start":{"line":76,"column":47},"end":{"line":98,"column":5}}},"6":{"name":"(anonymous_5)","line":106,"loc":{"start":{"line":106,"column":69},"end":{"line":130,"column":5}}}},"branchMap":{"1":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":50,"column":52}},{"start":{"line":50,"column":8},"end":{"line":50,"column":52}}]},"2":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":12},"end":{"line":82,"column":13}},{"start":{"line":80,"column":12},"end":{"line":82,"column":13}}]},"3":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":12},"end":{"line":92,"column":13}},{"start":{"line":88,"column":12},"end":{"line":92,"column":13}}]},"4":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":12},"end":{"line":128,"column":13}},{"start":{"line":109,"column":12},"end":{"line":128,"column":13}}]},"5":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":16},"end":{"line":109,"column":25}},{"start":{"line":109,"column":29},"end":{"line":109,"column":56}}]},"6":{"line":112,"type":"switch","locations":[{"start":{"line":112,"column":24},"end":{"line":114,"column":34}},{"start":{"line":115,"column":24},"end":{"line":117,"column":34}},{"start":{"line":118,"column":24},"end":{"line":120,"column":34}},{"start":{"line":121,"column":24},"end":{"line":123,"column":34}},{"start":{"line":124,"column":24},"end":{"line":125,"column":71}}]}},"s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0,"16":1,"17":1,"18":1,"19":0,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":1,"41":1,"42":1},"b":{"1":[1,0],"2":[0,0],"3":[0,1],"4":[1,0],"5":[1,1],"6":[1,0,0,0,0]},"f":{"1":1,"2":1,"3":0,"4":0,"5":1,"6":1},"code":["import FabaMediator, {INameToValueMap} from \"./FabaCoreMediator\";","import FabaEvent, {FabaEventResultType} from \"./FabaEvent\";","import FabaStore from \"./store/FabaStore\";","import {IMediatorCmdList} from \"./FabaCoreMediator\";","","/**"," * Fabalous Core Class"," *"," * Stores Mediators, Events and Vo's"," *"," * Handel's also the EventDispatching."," */","","export interface IFabaMediatorList {","    cls: any,","    mediator: FabaMediator","}"," ","/**"," * Dismissed module comment."," * This is the longer comment but will be dismissed in favor of the preferred comment."," */","export default class FabaCore {","    /*","    List of Mediators","     */","    static mediators: Array<IFabaMediatorList> = [];","","    /*","     * @param events List of Events (Obsulete?)","     */","    static events: any = {};","","    /*","     * List of Vo's (Obsulete?)","     */","    static vos: any = {};","","","    /*","    The source of truth","     */","    private static store: FabaStore<any>;","","    /**","     * Core class","     * @param store accepts one single Store \"The source of true\". If the store is already set the new one would not be used.","     */","    constructor(store:FabaStore<any>){","        if (!FabaCore.store) FabaCore.store = store;","    }","","    static setTestStore(store: FabaStore<any>) {","        //if (TEST) {","            FabaCore.store = store;","       // } else {","         //   throw \"Use this method only for Tests\";","       // }","    }","","","    /**","     * Reset mediators / Events and Vo's dictornary (usefull for HMR)","     */","    static reset() {","        FabaCore.mediators = [];","        FabaCore.events = [];","        FabaCore.vos = [];","    }","","","    /**","     * Add Mediator if the Mediator not already exist in the Dictornary","     * @param cls MediatorClass","     */","    static addMediator(cls: typeof FabaMediator): boolean {","        for (let i = 0; i < FabaCore.mediators.length; i++) {","            const obj = FabaCore.mediators[i].cls;","","            if (obj == cls) {","                return false;","            }","        }","","        const mediator:FabaMediator = new cls;","","        for (let item in mediator.cmdList) {","            if (FabaCore.events[item]){","                FabaCore.events[item].commands = FabaCore.events[item].commands.concat(mediator.cmdList[item].commands);","            } else {","                FabaCore.events[item] = {event:mediator.cmdList[item].event, commands:mediator.cmdList[item].commands};","            }","        }","","        FabaCore.mediators.push({cls: cls, mediator: mediator});","        ","        return true;","    }","","     /**","     * Go through the routes and create the command and execute","     * @param event FabaEvents","     * @param resu FabaEventResultType","     */","","    static dispatchEvent(event: FabaEvent, resu?: FabaEventResultType) {","        for (let a: number = 0; a < this.mediators.length; a++) {","            const routeItem: INameToValueMap = this.mediators[a].mediator.cmdList;","            if (routeItem && routeItem[event.identifyer]){","                for (let obj of routeItem[event.identifyer].commands) {","                    switch (resu) {","                        case FabaEventResultType.EXECUTE:","                            new obj.cmd(FabaCore.store).execute(event);","                            break;","                        case FabaEventResultType.RESULT:","                            new obj.cmd(FabaCore.store).result(event);","                            break;","                        case FabaEventResultType.ERROR:","                            new obj.cmd(FabaCore.store).error(event);","                            break;","                        case FabaEventResultType.TIMEOUT:","                            new obj.cmd(FabaCore.store).timeout(event);","                            break;","                        default:","                            new obj.cmd(FabaCore.store).execute(event);","                    }","                }","            }","        }","    }","}"],"l":{"2":1,"23":1,"27":1,"32":1,"37":1,"50":1,"53":1,"55":0,"65":1,"66":0,"67":0,"68":0,"76":1,"77":1,"78":0,"80":0,"81":0,"85":1,"87":1,"88":1,"89":0,"91":1,"95":1,"97":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"113":1,"114":1,"116":0,"117":0,"119":0,"120":0,"122":0,"123":0,"125":0,"131":1}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/store/FabaStore.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/store/FabaStore.ts","statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":14,"column":0}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":26}},"3":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"4":{"start":{"line":12,"column":8},"end":{"line":12,"column":26}},"5":{"start":{"line":14,"column":0},"end":{"line":14,"column":1}}},"fnMap":{"1":{"name":"(anonymous_0)","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":-1}}},"2":{"name":"FabaStore","line":7,"loc":{"start":{"line":7,"column":27},"end":{"line":9,"column":5}}},"3":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}}}},"branchMap":{},"s":{"1":1,"2":1,"3":1,"4":0,"5":1},"b":{},"f":{"1":1,"2":1,"3":0},"code":["/**"," * FabaStore used as alternative to FabaImmutableStore"," */","export default class FabaStore<TProp>{","    private _data:TProp;","","    constructor(data?:TProp){","        this._data = data;","    }","","    get data(): TProp {","        return this._data;","    }","}"],"l":{"4":1,"8":1,"11":1,"12":0,"14":1}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCoreMediator.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCoreMediator.ts","statementMap":{"1":{"start":{"line":38,"column":0},"end":{"line":110,"column":0}},"2":{"start":{"line":39,"column":4},"end":{"line":39,"column":34}},"3":{"start":{"line":45,"column":8},"end":{"line":45,"column":32}},"4":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},"5":{"start":{"line":52,"column":8},"end":{"line":52,"column":52}},"6":{"start":{"line":61,"column":4},"end":{"line":68,"column":5}},"7":{"start":{"line":62,"column":29},"end":{"line":62,"column":40}},"8":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"9":{"start":{"line":64,"column":12},"end":{"line":64,"column":70}},"10":{"start":{"line":67,"column":8},"end":{"line":67,"column":78}},"11":{"start":{"line":78,"column":4},"end":{"line":86,"column":5}},"12":{"start":{"line":79,"column":29},"end":{"line":79,"column":40}},"13":{"start":{"line":81,"column":8},"end":{"line":85,"column":11}},"14":{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},"15":{"start":{"line":83,"column":16},"end":{"line":83,"column":38}},"16":{"start":{"line":94,"column":4},"end":{"line":108,"column":5}},"17":{"start":{"line":95,"column":29},"end":{"line":95,"column":40}},"18":{"start":{"line":96,"column":8},"end":{"line":102,"column":9}},"19":{"start":{"line":97,"column":22},"end":{"line":97,"column":60}},"20":{"start":{"line":99,"column":12},"end":{"line":101,"column":13}},"21":{"start":{"line":100,"column":16},"end":{"line":100,"column":65}},"22":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"23":{"start":{"line":105,"column":12},"end":{"line":105,"column":46}},"24":{"start":{"line":110,"column":0},"end":{"line":110,"column":1}}},"fnMap":{"1":{"name":"(anonymous_0)","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":-1}}},"2":{"name":"FabaCoreMediator","line":44,"loc":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}}},"3":{"name":"(anonymous_2)","line":51,"loc":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}}},"4":{"name":"(anonymous_3)","line":61,"loc":{"start":{"line":61,"column":71},"end":{"line":68,"column":5}}},"5":{"name":"(anonymous_4)","line":78,"loc":{"start":{"line":78,"column":113},"end":{"line":86,"column":5}}},"6":{"name":"(anonymous_5)","line":81,"loc":{"start":{"line":81,"column":67},"end":{"line":85,"column":9}}},"7":{"name":"(anonymous_6)","line":94,"loc":{"start":{"line":94,"column":74},"end":{"line":108,"column":5}}}},"branchMap":{"1":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},{"start":{"line":63,"column":8},"end":{"line":65,"column":9}}]},"2":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},{"start":{"line":82,"column":12},"end":{"line":84,"column":13}}]},"3":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":12},"end":{"line":101,"column":13}},{"start":{"line":99,"column":12},"end":{"line":101,"column":13}}]},"4":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},{"start":{"line":104,"column":8},"end":{"line":106,"column":9}}]}},"s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1},"b":{"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":1,"2":1,"3":0,"4":1,"5":0,"6":0,"7":0},"code":["import FabaEvent from \"./FabaEvent\";","import FabaCoreCommand from \"./FabaCoreCommand\";","","export interface IMediatorCmdList {","    event: FabaEvent;","    commands: Array<IMedaitorCmd>;","}","","export interface IMedaitorCmd {","    event: any;","    cmd: any;","}","export interface INameToValueMap extends Object {","    [key: string]: any;","}","","export interface IFabaCoreMediator extends Object {","    registerCommands(): void;","","    addCommand(event: typeof FabaEvent, command: typeof FabaCoreCommand): void;","    updateCommand(event: typeof FabaEvent, oldCommand: typeof FabaCoreCommand, newCommand: typeof FabaCoreCommand): void;","    removeCommand(event: typeof FabaEvent, command: typeof FabaCoreCommand): void;","","    /*","     addCommand(event:{new():void;}, command: {new():void;}):void;","     updateCommand(event:{new():void;}, command: {new():void;}):void;","     removeCommand(event:{new():void;}, command: {new():void;}):void;","     */","}","","/**"," * FabaCoreMediator should be extended by any Runtime"," *"," * Add / Remove and Update all commands"," *"," */","","export default class FabaCoreMediator implements IFabaCoreMediator {","    cmdList: INameToValueMap = {};","","    /**","     * Call the \"registerCommands\" function after create","     */","    constructor() {","        this.registerCommands();","    }","","    /**","     * Function need to be overwrite by Mediator","     */","    registerCommands(): void {","        throw (\"Please override register Commands\");","    }","","    /**","     * Add command and event to the Mediator","     *","     * @param event {FabaEvent}","     * @param command {FabaCoreCommand}","     */","    addCommand(event: typeof FabaEvent, command: typeof FabaCoreCommand): void {","        const h: FabaEvent = new event();","        if (!this.cmdList[event.name]) {","            this.cmdList[h.identifyer] = {event: event, commands: []};","        }","","        this.cmdList[h.identifyer].commands.push({cmd: command, options: {}});","    }","","","    /**","     * Method can be used to update Event and Command and overwrite the prevoise registration","     *","     * @param event","     * @param oldCommand","     * @param newCommand","     */","    updateCommand(event: typeof FabaEvent, oldCommand: typeof FabaCoreCommand, newCommand: typeof FabaCoreCommand): void {","        const h: FabaEvent = new event();","","        this.cmdList[h.identifyer].commands.map((item: IMedaitorCmd) => {","            if (item.cmd === oldCommand) {","                item.cmd = newCommand;","            }","        });","    }","","    /**","     * Remove all registration form event // command","     *","     * @param event","     * @param command","     */","    removeCommand(event: typeof FabaEvent, command: typeof FabaCoreCommand): void {","        const h: FabaEvent = new event();","        for (let i = 0; i < this.cmdList[h.identifyer].commands.length; i++) {","            let obj = this.cmdList[h.identifyer].commands[i];","","            if (obj.cmd === command) {","                this.cmdList[h.identifyer].commands.splice(i, 1);","            }","        }","","        if (this.cmdList[h.identifyer].commands.length === 0) {","            delete this.cmdList[h.identifyer];","        }","","    }","","}",""],"l":{"38":1,"39":1,"45":1,"51":1,"52":0,"61":1,"62":1,"63":1,"64":1,"67":1,"78":1,"79":0,"81":0,"82":0,"83":0,"94":1,"95":0,"96":0,"97":0,"99":0,"100":0,"104":0,"105":0,"110":1}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCoreCommand.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCoreCommand.ts","statementMap":{"1":{"start":{"line":9,"column":0},"end":{"line":31,"column":0}},"2":{"start":{"line":21,"column":8},"end":{"line":21,"column":27}},"3":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"4":{"start":{"line":29,"column":8},"end":{"line":29,"column":31}},"5":{"start":{"line":31,"column":0},"end":{"line":31,"column":1}}},"fnMap":{"1":{"name":"(anonymous_0)","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":-1}}},"2":{"name":"FabaCoreCommand","line":20,"loc":{"start":{"line":20,"column":69},"end":{"line":22,"column":5}}},"3":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}}}},"branchMap":{},"s":{"1":1,"2":1,"3":1,"4":0,"5":1},"b":{},"f":{"1":1,"2":1,"3":0},"code":["import FabaImmutableStore from \"./store/FabaImmutableStore\";","import FabaStore from \"./store/FabaStore\";","","/**"," * FabaCoreCommand used in every Runtime"," * Set the store"," */","","export default class FabaCoreCommand<TStore> implements IFabaCoreCommand<TStore> {","    /**","     * Store can be Immutable or not","     */","    store: FabaImmutableStore<TStore> | FabaStore<TStore>;","","","    /**","     * Set the store","     * @param store","     */","    constructor(store: FabaImmutableStore<TStore> | FabaStore<TStore>) {","        this.store = store;","    }","","    /**","     * Get access to the store Data","     * @returns {TStore}","     */","    get data(): TStore {","        return this.store.data;","    }","}","","export interface IFabaCoreCommand<TStore> {","    store: FabaImmutableStore<TStore> | FabaStore<TStore>;","}"],"l":{"9":1,"21":1,"28":1,"29":0,"31":1}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/transport/FabaCoreTransportBase.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/transport/FabaCoreTransportBase.ts","statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":48,"column":0}},"2":{"start":{"line":10,"column":12},"end":{"line":10,"column":46}},"3":{"start":{"line":23,"column":14},"end":{"line":31,"column":5}},"4":{"start":{"line":23,"column":51},"end":{"line":23,"column":75}},"5":{"start":{"line":26,"column":18},"end":{"line":26,"column":31}},"6":{"start":{"line":29,"column":36},"end":{"line":29,"column":57}},"7":{"start":{"line":30,"column":8},"end":{"line":30,"column":29}},"8":{"start":{"line":37,"column":11},"end":{"line":39,"column":5}},"9":{"start":{"line":45,"column":11},"end":{"line":46,"column":5}},"10":{"start":{"line":48,"column":0},"end":{"line":48,"column":1}}},"fnMap":{"1":{"name":"(anonymous_0)","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":-1}}},"2":{"name":"FabaCoreTransportBase","line":13,"loc":{"start":{"line":13,"column":4},"end":{"line":14,"column":5}}},"3":{"name":"(anonymous_2)","line":23,"loc":{"start":{"line":23,"column":75},"end":{"line":31,"column":5}}},"4":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":42},"end":{"line":39,"column":5}}},"5":{"name":"(anonymous_4)","line":45,"loc":{"start":{"line":45,"column":32},"end":{"line":46,"column":5}}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":51},"end":{"line":23,"column":75}},{"start":{"line":23,"column":51},"end":{"line":23,"column":75}}]}},"s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"b":{"1":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"code":"import FabaEvent from \"./../FabaEvent\";\n\n/**\n * This class is used by all Fabalous Endpoints and should be extended by a new Transport method like Rest or Websocket.\n */\nexport default class FabaCoreTransportBase implements IFabaCoreTransportBase {\n    /* TODO: Check if needed */\n    \n    private evnid: string;\n    private runningQuerysNew: Array<any> = [];\n    private runningQuerys: Array<any>;\n\n    constructor() {\n    }\n\n    /**\n     * Serialize the FabaEvent\n     *\n     * @param event\n     * @param compress\n     * @returns {string}\n     */\n    protected prepareEventToSend(event: FabaEvent, compress: boolean = true): string {\n        // TODO: Check if needed\n\n        var qId = Math.random();\n        //this.runningQuerysNew.push({e: event, q: qId, v: 0, clb: event.callBack});\n\n        var serilizedData: string = JSON.stringify(event);\n        return serilizedData;\n    }\n\n    /**\n     * Need to Override\n     * @param incomingMsg\n     */\n    public messageHandler(incomingMsg: any): void {\n        //data = JSON.parse(incomingMsg);\n    }\n\n    /**\n     * Need to override\n     * @param event\n     */\n    public send(event: FabaEvent) {\n    }\n\n}\n\n/**\n ** Implementation of FabaCoreTransportBase\n **/\nexport interface IFabaCoreTransportBase {\n    messageHandler(incomingMsg: any):void;\n    send(event: FabaEvent):void;\n}","l":{"6":0,"10":0,"23":0,"26":0,"29":0,"30":0,"37":0,"45":0,"48":0}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaValueObject.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaValueObject.ts","statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":10,"column":0}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":26}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":1}}},"fnMap":{"1":{"name":"(anonymous_0)","line":1,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":-1}}},"2":{"name":"FabaValueObject","line":6,"loc":{"start":{"line":6,"column":4},"end":{"line":8,"column":5}}}},"branchMap":{},"s":{"1":0,"2":0,"3":0},"b":{},"f":{"1":0,"2":0},"code":"export default class FabaValueObject {\n    className: string;\n\n    protected schema = {};\n\n    constructor() {\n\n    }\n\n}\n","l":{"1":0,"4":0,"10":0}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaEnviroment.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaEnviroment.ts","statementMap":{"1":{"start":{"line":5,"column":1},"end":{"line":5,"column":31}}},"fnMap":{},"branchMap":{},"s":{"1":0},"b":{},"f":{},"code":"/**\n * Enviroment vars\n * @type {boolean}\n */\n process.env.FABA_DEBUG = true;","l":{"5":0}},
"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCoreRuntime.ts":{"path":"/Users/creativecode/Projekte/@fabalous/fabalous-core/src/FabaCoreRuntime.ts","statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":33}},"2":{"start":{"line":16,"column":0},"end":{"line":16,"column":53}},"3":{"start":{"line":16,"column":45},"end":{"line":16,"column":53}},"4":{"start":{"line":25,"column":11},"end":{"line":27,"column":5}},"5":{"start":{"line":26,"column":8},"end":{"line":26,"column":69}},"6":{"start":{"line":37,"column":11},"end":{"line":47,"column":5}},"7":{"start":{"line":38,"column":8},"end":{"line":46,"column":9}},"8":{"start":{"line":39,"column":12},"end":{"line":43,"column":13}},"9":{"start":{"line":39,"column":25},"end":{"line":39,"column":24}},"10":{"start":{"line":40,"column":16},"end":{"line":42,"column":17}},"11":{"start":{"line":41,"column":20},"end":{"line":41,"column":48}},"12":{"start":{"line":45,"column":12},"end":{"line":45,"column":62}},"13":{"start":{"line":48,"column":0},"end":{"line":48,"column":1}},"14":{"start":{"line":17,"column":11},"end":{"line":17,"column":48}}},"fnMap":{"1":{"name":"(anonymous_0)","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":-1}}},"2":{"name":"FabaCoreRuntime","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":48,"column":1}}},"3":{"name":"(anonymous_2)","line":25,"loc":{"start":{"line":25,"column":66},"end":{"line":27,"column":5}}},"4":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":65},"end":{"line":47,"column":5}}}},"branchMap":{"1":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":46,"column":9}},{"start":{"line":38,"column":8},"end":{"line":46,"column":9}}]},"2":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":16},"end":{"line":42,"column":17}},{"start":{"line":40,"column":16},"end":{"line":42,"column":17}}]}},"s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"code":"import FabaEvent from \"./FabaEvent\";\nimport FabaCore from \"./FabaCore\";\nimport FabaTransportBase from \"./transport/FabaCoreTransportBase\";\n\n/**\n * Used for every Endpoint\n */\nexport interface IServerEndpoint {\n    name: string;\n    connection: FabaTransportBase;\n}\n\n/**\n * FabaCoreRuntime extends FabaCore and is used by every Runtime\n */\nexport default class FabaCoreRuntime extends FabaCore {\n    static servers: Array<IServerEndpoint> = [];\n\n    /**\n     * Is used to register every FabaEndpoint\n     *\n     * @param conn\n     * @param name\n     */\n    public addServerEndPoint(conn: FabaTransportBase, name: string): void {\n        FabaCoreRuntime.servers.push({name: name, connection: conn});\n    }\n\n\n    // TODO: Is used?!\n    /**\n     * Send to Event to Endpoint\n     *\n     * @param event\n     * @param endPointName\n     */\n    static sendToEndpoint(event: FabaEvent, endPointName?: string): void {\n        if (endPointName) {\n            for (var item of FabaCoreRuntime.servers) {\n                if (item.name === endPointName) {\n                    item.connection.send(event);\n                }\n            }\n        } else {\n            FabaCoreRuntime.servers[0].connection.send(event);\n        }\n    }\n}","l":{"2":0,"16":0,"17":0,"25":0,"26":0,"37":0,"38":0,"39":0,"40":0,"41":0,"45":0,"48":0}}}
